<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.pitaya.smart_rest.dingdan.mapper.OrderMapper">
    <select id="selectOrderModelPage" resultType="com.pitaya.smart_rest.dingdan.model.OrderModel"
            parameterType="com.pitaya.smart_rest.dingdan.query.OrderQuery">
                SELECT
                o.id,o.member_id,o.order_date,o.state,o.descriptions,o.comments,o.tuopan_id,m.mobile
                FROM
                t_order o
                LEFT JOIN t_member m
                ON o.member_id = m.id
                <where>
                    <if test="orderQuery.id != null and orderQuery.id!=''">
                        AND o.id LIKE CONCAT('%',#{orderQuery.id},'%')
                    </if>
                    <if test="orderQuery.memberId != null">
                        AND o.member_id LIKE CONCAT('%',#{orderQuery.memberId},'%')
                    </if>
                    <if test="orderQuery.state != null">
                        AND o.state LIKE CONCAT('%',#{orderQuery.state},'%')
                    </if>
                    <if test="orderQuery.mobile != null and orderQuery.mobile!=''">
                        AND m.mobile LIKE CONCAT('%',#{orderQuery.mobile},'%')
                    </if>
                    <if test="orderQuery.orderDate != null and orderQuery.orderDate!='' ">
                        AND o.order_date &gt;= #{orderQuery.orderDate}
                    </if>
                    <if test="orderQuery.endDate != null and orderQuery.endDate!='' ">
                        AND o.order_date &lt;= #{orderQuery.endDate}
                    </if>

                </where>

    </select>
</mapper>
